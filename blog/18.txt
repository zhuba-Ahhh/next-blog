3:I[71825,[],""]
5:I[23140,[],""]
6:I[97970,["970","static/chunks/970-ddd298099001c215.js","185","static/chunks/app/layout-9cb2f605bf947a11.js"],"ViewTransitions"]
7:I[85882,["970","static/chunks/970-ddd298099001c215.js","185","static/chunks/app/layout-9cb2f605bf947a11.js"],"ThemeProvider"]
8:I[65622,["970","static/chunks/970-ddd298099001c215.js","185","static/chunks/app/layout-9cb2f605bf947a11.js"],"default"]
9:I[74585,["970","static/chunks/970-ddd298099001c215.js","185","static/chunks/app/layout-9cb2f605bf947a11.js"],"default"]
a:I[97970,["970","static/chunks/970-ddd298099001c215.js","185","static/chunks/app/layout-9cb2f605bf947a11.js"],"Link"]
4:["id","18","d"]
0:["8cP0LG8k5EAbwdl4KCUI4",[[["",{"children":["blog",{"children":[["id","18","d"],{"children":["__PAGE__?{\"id\":\"18\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["id","18","d"],{"children":["__PAGE__",{},[["$L1","$L2",null],null],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[null,["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined"}]],null]},[[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/4b751e17faaae912.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","1",{"rel":"stylesheet","href":"/_next/static/css/b9e5f75db2a40d89.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","2",{"rel":"stylesheet","href":"/_next/static/css/93c09f23e5e79b42.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","3",{"rel":"stylesheet","href":"/_next/static/css/d95f70565c8fec8b.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","4",{"rel":"stylesheet","href":"/_next/static/css/15a4a72a41cadd99.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","5",{"rel":"stylesheet","href":"/_next/static/css/5e92f1bdc02d74d7.css","precedence":"next","crossOrigin":"$undefined"}],["$","link","6",{"rel":"stylesheet","href":"/_next/static/css/fc68ad6c171afbad.css","precedence":"next","crossOrigin":"$undefined"}]],["$","$L6",null,{"children":["$","html",null,{"lang":"zh","suppressHydrationWarning":true,"className":"h-full","children":[["$","head",null,{"children":["$","link",null,{"rel":"icon","href":"/next.svg","type":"image/svg+xml"}]}],["$","body",null,{"className":"flex flex-col bg-background antialiased h-full","children":["$","$L7",null,{"attribute":"class","children":[["$","$L8",null,{}],["$","$L9",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[]}]}],["$","footer",null,{"className":"border-t py-6 md:py-0 bg-background","children":["$","div",null,{"className":"container flex flex-col items-center justify-between gap-4 md:h-24 md:flex-row","children":[["$","div",null,{"className":"flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0","children":["$","p",null,{"className":"text-center text-sm leading-loose text-muted-foreground md:text-left","children":["© ",2024," 我的博客. 保留所有权利。","新建站","，感谢您的访问！"]}]}],["$","nav",null,{"className":"flex items-center space-x-4","children":[["$","$La","/privacy",{"href":"/privacy","className":"text-sm text-muted-foreground hover:text-primary transition duration-200","children":["$","div",null,{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95 text-foreground hover:bg-accent hover:text-accent-foreground active:bg-accent/90","children":"隐私政策"}]}],["$","$La","/terms",{"href":"/terms","className":"text-sm text-muted-foreground hover:text-primary transition duration-200","children":["$","div",null,{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95 text-foreground hover:bg-accent hover:text-accent-foreground active:bg-accent/90","children":"使用条款"}]}],["$","$La","/contact",{"href":"/contact","className":"text-sm text-muted-foreground hover:text-primary transition duration-200","children":["$","div",null,{"className":"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 cursor-pointer transition-transform duration-200 ease-in-out hover:scale-105 active:scale-95 text-foreground hover:bg-accent hover:text-accent-foreground active:bg-accent/90","children":"联系我们"}]}]]}]]}]}]]}]}]]}]}]],null],null],["$Lb",null]]]]
c:I[16952,["731","static/chunks/16a011e1-9056fcb0ff2ce2ac.js","911","static/chunks/d59ec710-e1be456c3fcebe34.js","951","static/chunks/cc823849-a01c375746e63aad.js","970","static/chunks/970-ddd298099001c215.js","626","static/chunks/626-7db672032c106a63.js","821","static/chunks/821-2445563b22b9e39a.js","502","static/chunks/502-14c040555facc110.js","548","static/chunks/app/blog/%5Bid%5D/page-2c6024508172c6fc.js"],"default"]
d:"$Sreact.suspense"
e:I[96993,["731","static/chunks/16a011e1-9056fcb0ff2ce2ac.js","911","static/chunks/d59ec710-e1be456c3fcebe34.js","951","static/chunks/cc823849-a01c375746e63aad.js","970","static/chunks/970-ddd298099001c215.js","626","static/chunks/626-7db672032c106a63.js","821","static/chunks/821-2445563b22b9e39a.js","502","static/chunks/502-14c040555facc110.js","548","static/chunks/app/blog/%5Bid%5D/page-2c6024508172c6fc.js"],"BailoutToCSR"]
f:I[48866,["731","static/chunks/16a011e1-9056fcb0ff2ce2ac.js","911","static/chunks/d59ec710-e1be456c3fcebe34.js","951","static/chunks/cc823849-a01c375746e63aad.js","970","static/chunks/970-ddd298099001c215.js","626","static/chunks/626-7db672032c106a63.js","821","static/chunks/821-2445563b22b9e39a.js","502","static/chunks/502-14c040555facc110.js","548","static/chunks/app/blog/%5Bid%5D/page-2c6024508172c6fc.js"],"default"]
10:T539,
## 情况

使用`@nestjs/swagger`撰写api文档，本地打包预览正常，上传部署报错:
`swagger-ui.css`等资源缺失

![](https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/d55bf5102a524a9f96280f559d9b3af1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGx6Z2S6Iqx5qyy54eDMzEw:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMzcwMzYyMDA3ODY3OTY3MSJ9&rk3s=f64ab15b&x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&x-orig-expires=1734666281&x-orig-sign=QM0Dm%2FUPU1S2Y%2Bi3rYwfbzqht1E%3D)

## 解法

使用`customCssUrl`和`customJs`动态注入资源

```ts
const CSS_URL = [
  'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/5.18.2/swagger-ui.min.css',
];

const JS_URL = [
  'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/5.18.2/swagger-ui.min.js',
  'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/5.18.2/swagger-ui-bundle.min.js',
  'https://cdnjs.cloudflare.com/ajax/libs/swagger-ui/5.18.2/swagger-ui-standalone-preset.min.js',
];


SwaggerModule.setup('doc', app, document, {
    jsonDocumentUrl: 'doc/json',
    customCssUrl: CSS_URL,
    customJs: JS_URL,
  });
```

缺点：

1.  依旧会报错
2.  页面会出来慢一点

有其他解决方案可以分享交流下~

参考： [Documentation | NestJS - A progressive Node.js framework](https://docs.nestjs.com/openapi/introduction)
2:[["$","$Lc",null,{}],["$","$d",null,{"fallback":null,"children":["$","$Le",null,{"reason":"next/dynamic","children":["$","$Lf",null,{"post":{"id":18,"title":"@nestjs/swagger部署报错","excerpt":"@nestjs/swagger撰写api文档...","content":"$10","date":"2024-12-10","author":"李十八","tags":["nestjs","nodejs"]},"headings":[{"level":2,"text":"情况","slug":"情况"},{"level":2,"text":"解法","slug":"解法"}],"readingTime":1,"wordCount":52,"relatedPosts":[],"prevPost":{"id":16,"title":"Serverless架构与前端开发","excerpt":"探讨Serverless架构如何简化前端开发流程...","content":"Serverless架构是一种新兴的云计算模式，允许开发者专注于代码而无需管理服务器。通过使用云服务提供商（如AWS Lambda、Azure Functions等），前端开发者可以快速构建和部署应用程序。Serverless架构的优势包括自动扩展、按需计费和简化的运维管理。本文将深入探讨如何在前端项目中有效利用Serverless架构。\n\n## 什么是Serverless架构？\n\nServerless架构并不意味着没有服务器，而是将服务器的管理和维护工作交给云服务提供商。开发者只需编写代码并上传到云平台，云服务提供商会负责运行、扩展和维护这些代码。\n\n## Serverless架构的优势\n\n1. **自动扩展**：根据流量自动调整资源，确保应用在高负载时依然稳定。\n2. **按需计费**：只为实际使用的计算资源付费，降低了成本。\n3. **简化运维**：减少了服务器管理的复杂性，开发者可以将更多精力放在业务逻辑上。\n\n## 如何在前端项目中使用Serverless架构\n\n### 1. 选择合适的云服务提供商\n\n选择一个支持Serverless架构的云服务提供商，如AWS、Azure或Google Cloud。了解它们的功能、定价和支持的编程语言。\n\n### 2. 设计无状态的函数\n\nServerless函数应设计为无状态的，确保每次调用都是独立的。可以使用外部存储（如数据库或缓存）来管理状态。\n\n### 3. 使用API Gateway\n\n通过API Gateway将前端请求路由到Serverless函数。API Gateway可以处理身份验证、流量管理和监控等功能。\n\n### 4. 监控和调试\n\n使用云服务提供商提供的监控工具，跟踪函数的性能和错误。确保能够快速定位和解决问题。\n\n## 结论\n\nServerless架构为前端开发者提供了一个高效、灵活的开发模式。通过合理利用Serverless架构，开发者可以专注于业务逻辑，提升开发效率和应用性能。随着技术的不断发展，Serverless架构将会在前端开发中扮演越来越重要的角色。","date":"2024-05-30","author":"李十八","tags":["Serverless","前端开发","云计算"]},"nextPost":"$undefined"}]}]}]]
b:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"我的博客"}],["$","meta","3",{"name":"description","content":"欢迎来到我的博客,这里分享前端开发的最新趋势和技巧"}],["$","meta","4",{"name":"keywords","content":"Next.js,React,JavaScript,前端开发"}],["$","meta","5",{"property":"og:title","content":"我的博客"}],["$","meta","6",{"property":"og:description","content":"欢迎来到我的博客,这里分享前端开发的最新趋势和技巧"}],["$","meta","7",{"property":"og:url","content":"https://yourblog.com"}],["$","meta","8",{"property":"og:locale","content":"zh_CN"}],["$","meta","9",{"property":"og:type","content":"website"}],["$","meta","10",{"name":"twitter:card","content":"summary"}],["$","meta","11",{"name":"twitter:title","content":"我的博客"}],["$","meta","12",{"name":"twitter:description","content":"欢迎来到我的博客,这里分享前端开发的最新趋势和技巧"}]]
1:null
